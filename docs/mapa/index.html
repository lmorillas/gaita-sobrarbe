<!DOCTYPE html>
<html lang="es-es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>La gaita de boto/mapa/</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <meta name="googlebot" content="index,follow,snippet,archive">
    <link rel="stylesheet" href="https://unpkg.com/terminal.css@0.7.4/dist/terminal.min.css" />
    <link rel="stylesheet" href="https://gaitadeboto.es/hugo-theme-console/css/animate-4.1.1.min.css">
  
    <link rel="stylesheet" href="https://gaitadeboto.es/css/micss.css">
    
      <!--[if lt IE 9]> 
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
       <meta property="og:title" content="Mapa" />
<meta property="og:description" content="Mapa interactivo con fuentes de Gaita Sobrarbe" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://gaitadeboto.es/mapa/" /><meta property="article:published_time" content="2025-06-16T08:09:35+02:00" />


  <link rel="stylesheet" href="https://get.mavo.io/mavo.css"/>
    <script src="https://get.mavo.io/mavo.js"></script>


    
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>


  <style>
    body { font-family: sans-serif; margin: 0; }
    #map { height: 90vh; width: 50%; margin: 0 auto; display: block; }
  </style>

</head>
<body class="terminal">
    <div class="container">
        <div class="terminal-nav">
          <header class="terminal-logo">
            <div class="logo terminal-prompt">
              
              
              <a href="https://gaitadeboto.es/" class="no-style site-name">La gaita de boto</a>:~# 
              <a href='https://gaitadeboto.es/mapa'>mapa</a>/</div></header>
          <nav class="terminal-menu">
            <ul vocab="https://schema.org/" typeof="BreadcrumbList">
                
                <li property="itemListElement" typeof="ListItem">
                    <a property="item" typeof="WebPage" href="https://gaitadeboto.es/documentacion">
                    <span property="name">documentación/</span></a>
                    <meta property="position" content="1" />
                </li>
                
                <li property="itemListElement" typeof="ListItem">
                    <a property="item" typeof="WebPage" href="https://gaitadeboto.es/timbre">
                    <span property="name">la voz/</span></a>
                    <meta property="position" content="2" />
                </li>
                
                <li property="itemListElement" typeof="ListItem">
                    <a property="item" typeof="WebPage" href="https://gaitadeboto.es/mapa">
                    <span property="name">mapa/</span></a>
                    <meta property="position" content="3" />
                </li>
                
                <li property="itemListElement" typeof="ListItem">
                    <a property="item" typeof="WebPage" href="https://gaitadeboto.es/galeria">
                    <span property="name">galería/</span></a>
                    <meta property="position" content="4" />
                </li>
                
            </ul>
          </nav>
        </div>
    </div>

    <div class="container animated zoomIn fast" >
        
<h2 id="recursos-a-estudiar">Recursos a estudiar</h2>
<p>Aquí indicamos puntos con enlaces a recursos que pueden ser de interés para el estudio de la Gaita Sobrarbe. Hay que revisar los enlaces y validar los recursos relacionados con la gaita de boto.</p>


<div mv-app="gaita-sobrarbe"
    mv-source="https://docs.google.com/spreadsheets/d/e/2PACX-1vSWc3W5B-mzYvY4mTIrmwGP3OFJcdU8r2660MbI_TgUSC3P92fnnZxUwaCKgN7ifeNXlUBWdUvvm-Us/pub?output=csv"
    mv-format="csv"
    mv-bar="none" 
>
<div id="map"></div>
<ul property="pueblo" mv-list >
  <li mv-item >
    <span property="nombre"></span>
    <span property="lat"></span>
    <span property="lon"></span>
    <span property="sipca"></span>
    <span property="musicatradicional"></span>
  </li>
</ul>
</div>


        <div class="footer">
    Powered by <a href="https://gohugo.io/">Hugo</a> with
    <a href="https://github.com/mrmierzejewski/hugo-theme-console/">Console Theme</a>. 
</div>

    </div>
    
<script>
  
    function url_sipca(codigo) {
      const base = "https://www.sipca.es/censo/resultados_busqueda_oral_avanzada.html";
      const params = new URLSearchParams({
        paginainicial: 0,
        paginaanterior: 0,
        accion: "BUSCAR_BIENES",
        tipobien: "IAL",
        provincia: 22,
        comarca: 3,
        municipio: String(codigo).slice(0, 5),
        elm: codigo,
        "fcatinmat[]": "c5"
      });
      return `${base}?${params.toString()}`;
    }

    function url_musicatradicional(codigo) {
      return `https://www.musicatradicional.eu/es/pieces?location=${codigo}`;
    }


document.addEventListener("mv-load", () => {
  const map = L.map("map").setView([42.5, 0.1], 9);

  L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
    attribution: "© OpenStreetMap contributors"
  }).addTo(map);

  const items = document.querySelectorAll("[mv-item]");

  items.forEach(item => {
    const nombre = item.querySelector("[property='nombre']").textContent.trim();
    if (nombre == "Aínsa") {
      console.log(item);
      ain = item; 
      
    }
    const lat = item.querySelector("[property='lat']").textContent.replace(",", ".");
    const lon = item.querySelector("[property='lon']").textContent.replace(",", ".");
    

    const latNum = parseFloat(lat);
    const lonNum = parseFloat(lon);
    
    let datos = "<ul>";
    

    const sipcaRaw = item.querySelector('[property="sipca"]')?.textContent.trim();
    const sipca = sipcaRaw ? sipcaRaw.replace(/[.,\s]/g, "") : null;

    let musicatradicional = item.querySelector("[property='musicatradicional']").textContent.trim();

    if (musicatradicional && musicatradicional.trim() !== "") {
      const cod = parseInt(musicatradicional);
      datos += `<li><a href="${url_musicatradicional(cod)}" target="_blank">MúsicaTradicional</a></li>`;
    }
    if (sipca && sipca.trim() !== "") {
      const cod = sipca;
      datos += `<li><a href="${url_sipca(cod)}" target="_blank">SIPCA</a></li>`;
    }
    datos += "</ul>";

  let popup = `<strong>${nombre}</strong><br>`;
  if (datos) {
    popup += `<i>Recursos</i>${datos}`;
  }

    if (!isNaN(latNum) && !isNaN(lonNum)) {
      L.marker([latNum, lonNum])
        .addTo(map)
        .bindPopup(popup)
        .bindTooltip(nombre);
    }
  });
  
fetch('https:\/\/gaitadeboto.es\/sobrarbe.json') 
  .then(response => response.json())
  .then(geojson => {
    const comarcaLayer = L.geoJSON(geojson, {
      style: {
        color: "#ff0000",       
        weight: 2,
        fillColor: "#ffcc00",   
        fillOpacity: 0.1
      },
      onEachFeature: function (feature, layer) {
        if (feature.properties && feature.properties.nombre) {
          layer.bindTooltip(feature.properties.nombre);
        }
      }
    }).addTo(map);

    
    map.fitBounds(comarcaLayer.getBounds());
  });

});


</script>

  </body>
</html>
